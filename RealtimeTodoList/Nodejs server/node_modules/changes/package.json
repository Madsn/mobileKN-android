{
  "name": "changes",
  "version": "1.1.1",
  "description": "A consistent, fault tolerant CouchDB _changes listener with pre-fetch support",
  "keywords": [
    "couchdb",
    "changes",
    "views",
    "consistent"
  ],
  "contributors": [
    {
      "name": "Bradley Meck",
      "email": "bradley@nodejitsu.com"
    },
    {
      "name": "Maciej Malecki",
      "email": "maciej@nodejitsu.com"
    },
    {
      "name": "Charlie Robbins",
      "email": "charlie@nodejitsu.com"
    }
  ],
  "main": "./lib/changes.js",
  "homepage": "http://github.com/indexzero/changes",
  "repository": {
    "type": "git",
    "url": "git://github.com/indexzero/changes"
  },
  "engines": {
    "node": "0.8.x | 0.6.x"
  },
  "dependencies": {
    "async": "~0.2.6",
    "qs": "~0.5.4",
    "request": "~2.14.0"
  },
  "readme": "# changes\n\nA consistent, fault tolerant CouchDB _changes listener with pre-fetch support.\n\n## Usage\n\n``` js\n  var Changes = require('changes');\n  \n  var changes = new Changes({\n    url: 'http://user:pass@127.0.0.1:5984/database',\n    timeout: {\n      max:  60000,\n      step: 5000\n    }\n  });\n  \n  //\n  // Dump changes as they come in.\n  //\n  changes.on('change', function (doc) {\n    console.dir(doc);\n  });\n  \n  //\n  // The callback will be called once a _changes\n  // connection has been established or with an\n  // error if the first connection fails.\n  //\n  changes.listen(function (err) {\n    if (err) {\n      console.log('Did not connect to _changes on first attempt');\n      console.dir(err);\n      changes.retry.enabled = false;\n      return process.exit(1);\n    }\n    \n    console.log('Listening for _changes');\n  });\n```\n\n## Pre-fetching Views\n\nOften when you establish a connection to `_changes` you also want to know about the other documents in a view before the current `update_seq`. This is supported like this:\n\n``` js\n  var Changes = require('changes');\n  \n  var changes = new Changes({\n    url: 'http://user:pass@127.0.0.1:5984/database',\n    views: {\n      'important': {\n        path: '_design/Some/_view/name',\n        query: { include_docs: true }\n      }\n    },\n    timeout: {\n      max:  60000,\n      step: 5000\n    }\n  });\n\n  //\n  // All rows from a queries view will be emitted\n  // in the `views:<name>` event **before** the\n  // `_changes` listener starts. \n  //\n  changes.on('views:important', function (rows) {\n    //\n    // Dump any existing \"important\" rows.\n    //\n    console.dir(rows);\n  });\n  \n  //\n  // Dump changes as they come in.\n  //\n  changes.on('change', function (doc) {\n    console.dir(doc);\n  });\n  \n  //\n  // The callback will be called once a _changes\n  // connection has been established or with an\n  // error if the first connection fails.\n  //\n  changes.listen(function (err) {\n    if (err) {\n      console.log('Did not connect to _changes on first attempt');\n      console.dir(err);\n      changes.retry.enabled = false;\n      return process.exit(1);\n    }\n    \n    console.log('Listening for _changes');\n  });\n```\n\n#### License: MIT\n#### Authors: [Bradley Meck](https://github.com/bmeck), [Maciej Malecki](https://github.com/mmalecki), [Charlie Robbins](https://github.com/indexzero)",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/indexzero/changes/issues"
  },
  "_id": "changes@1.1.1",
  "dist": {
    "shasum": "bea68c8419f31b475bc2add29e367c54fd306fab"
  },
  "_from": "changes@1.1.1",
  "_resolved": "https://registry.npmjs.org/changes/-/changes-1.1.1.tgz"
}
